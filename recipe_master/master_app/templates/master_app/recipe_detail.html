{% extends 'master_app/base.html' %}
{% load crispy_forms_tags %}

{% block content %}
<!DOCTYPE html>
<html>
		<meta name="viewport" content="width=device-width, initial-scale=1">
<head>

	<!-- <link rel="stylesheet" type="text/css" href="recipePagesStyle.css"> -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
	<script src="jquery.star-rating-svg.js"></script>
	<link rel="stylesheet" type="text/css" href="star-rating-svg.css">

<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<!--Fonts-->
	<link href='http://fonts.googleapis.com/css?family=Oleo+Script' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Leckerli+One' rel='stylesheet' type='text/css'>
	
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
	<style>

		#recipeName{
			text-align: center;
			padding-bottom: 1%;
		}
		html {
  		height: 100%;
  		width: 100%;
		}
		

		#recipePicture{
			border-radius: 1%;
		}

		.summary{
			padding: 3%;
		}

		h1{
			font: 100 75px/1.2 'Leckerli One', Helvetica, sans-serif;
			font-size:50px;
  			color: #000;
  			text-shadow: 2px 2px 0px rgba(0,0,0,0.2), 4px 4px 8px rgba(0,0,0,0.2); 
		}

		li{
			font-size: 20px;
		}

		.summary{
			font-size: 20px;
		}
		
		
		/*body{
			margin-top: -10;
			position: fixed;
			height: 100%;
  			margin: 0;
  			padding: 0;
  			width: 100%;
			font-family:  Helvetica, sans-serif;
		}
		.row {
  			display: table-row;
  			height: 50%;
		}

		.row:nth-child(1) {
  			background-color: #eee;
		}

		.row:nth-child(2) {
  			background-color: #ddd;
		}	*/
		.split {
  			height: 100%;
  			width: 50%;
  			position: fixed;
  			z-index: 1;
  			top: 0;
  			overflow-x: hidden;
  			padding-top: 20px;
			}	

		/* Control the left side */
		.left {
		padding-top: 15;
  		left: 0;
  		background-image: url('/media/cookbook.jpg');

		}
		.mySlides {display:none;}

		/* Control the right side */
		.right {
  		right: 0;
  		background-image: url('/media/cookbook.jpg');
		}


		/* If you want the content centered horizontally and vertically */
		.centered {
  		position: absolute;
  		top: 50%;
  		left: 50%;
  		transform: translate(-50%, -50%);
  		text-align: center;
		}
		 /* Style the container with a rounded border, grey background and some padding and margin */
.container {
  border: 3px solid #ccc;
  background-color: #eee;
  border-radius: 50px;
  padding: 10px;
  margin: 10px 0;
}

/* Clear floats after containers */
.container::after {
  content: "";
  clear: both;
  display: table;
}

/* Float images inside the container to the left. Add a right margin, and style the image as a circle */
.container img {
  float: left;
  margin-right: 20px;
  border-radius: 50%;
}

/* Increase the font-size of a span element */
.container span {
  font-size: 20px;
  margin-right: 15px;
  display: block;
  margin: auto;
}

/* Add media queries for responsiveness. This will center both the text and the image inside the container */
@media (max-width: 200px) {
  .container {
    text-align: center;
  }
 /* Style the tab */
 .tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons that are used to open the tab content */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
}
.container2 img {
    margin: auto;
    float: none;
    display: block;
  }

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
} 
body {font-family: Arial;}

/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}


} 

</style>

</head>

<body>
	<!--LEFT SIDE-->
<div class="split left">
	<br>
	<br>
					<div class="text-center" id=recipeName>
						<h1 class="article-title"><u>{{ recipe.recipe_name }}</u></h1></div>
					<class="bodyNotNav">
							{{ recipe.description }}
			<h5>{{recipe.review_set.count}} reviews</h5> 
			<h5>Average Overall Rating : 
					<span class="stars" data-rating="{{recipe.average_rate | floatformat}}" data-num-stars="5" ></span></h5>
			<h5>Average Authenticity Rating: <span class="stars" data-rating="{{recipe.authenticity | floatformat}}" data-num-stars="5" ></span></h5>

			<div class = "text-center" id='recipePicture'>
					<img class="mySlides" id="recipePicture" src="{{ recipe.image.url }}" "rounded center" alt="..." width="100%" >
					<img class = "mySlides" id="recipePicture" src="{{ recipe.image2.url }}" "rounded center" alt="..." width="100%">
					<button class="w3-button w3-black w3-display-left" onclick="plusDivs(-1)">&#10094;</button>
					<button class="w3-button w3-black w3-display-right" onclick="plusDivs(1)">&#10095;</button>
				  </div>
</div>

<br>
<br>
<br>
		


	
<!--RIGHT SIDE-->
<div class="split right">
<br>
<br>

<br>
<h2>Recipe Features</h2>
<p>Click on the buttons inside the tabbed menu:</p>

		<div class="tab">
				<button class="tablinks" onclick="openCity(event, 'London')">Ingredients</button>
				<button class="tablinks" onclick="openCity(event, 'Directions')">Directions</button>
				<button class="tablinks" onclick="openCity(event, 'Reviews')">Reviews</button>
		</div>

	<div id="London" class="tabcontent">
		<h3>Ingredients</h3>
  		<p>{{recipe.ingredients_list}}</p>
	</div>

	<div id="Directions" class="tabcontent">
  		<h3>Directions</h3>
  		<p>{{recipe.instructions}}</p>
	</div>
		
	<div id="Reviews" class="tabcontent">
		<h3> Reviews</h3>
		{% if recipe.review_set.all %}
		<div>
			{% for review in recipe.review_set.all %}
			<div>
					<div class="container">																						
							<img src="/media/fruit.jpg" alt="Avatar" style="width:80px">
							<p><span>{{ review.user }}</span></p>
							<h6>Overall Rated {{ review.rating }} </h6><br>
							<h6>Authencity Rated {{ review.authenticityRating }} of 5 </h6>
							<p>{{ review.comment }}</p></div>
				{% endfor %}
				{% else %}
					<p>No reviews yet.</p>
				{% endif %}</div>
			</div>
		
							<!-- ADD REVIEW-->
							<h3>Add your review</h3>
							{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
							<form action="{% url 'add_review' recipe.id %}" method="post">
							{% csrf_token %}
							{{ form.as_p }}
							<input type="submit" value="Add" />
							</form>
						</div>
<br>
<br>
<br>
							
								
	
		
</div>


<!--Stars-->
<script>
		$.fn.stars = function() {
			return $(this).each(function() {
	
				var rating = $(this).data("rating");
	
				var numStars = $(this).data("numStars");
	
				var fullStar = new Array(Math.floor(rating + 1)).join('<i class="fa fa-star"></i>');
	
				var halfStar = ((rating%1) !== 0) ? '<i class="fa fa-star-half-empty"></i>': '';
	
				var noStar = new Array(Math.floor(numStars + 1 - rating)).join('<i class="fa fa-star-o"></i>');
	
				$(this).html(fullStar + halfStar + noStar);
	
			});
		}
	
		$('.stars').stars();
</script>

<!--Recipe Image Slideshow-->

<script>
		var slideIndex = 1;
		showDivs(slideIndex);
		
		function plusDivs(n) {
		  showDivs(slideIndex += n);
		}
		
		function showDivs(n) {
		  var i;
		  var x = document.getElementsByClassName("mySlides");
		  if (n > x.length) {slideIndex = 1}
		  if (n < 1) {slideIndex = x.length}
		  for (i = 0; i < x.length; i++) {
			x[i].style.display = "none";  
		  }
		  x[slideIndex-1].style.display = "block";  
		}
		
</script>
		

<!--Recipe Feature Buttons-->

<script>
		function openCity(evt, cityName) {
		  var i, tabcontent, tablinks;
		  tabcontent = document.getElementsByClassName("tabcontent");
		  for (i = 0; i < tabcontent.length; i++) {
			tabcontent[i].style.display = "none";
		  }
		  tablinks = document.getElementsByClassName("tablinks");
		  for (i = 0; i < tablinks.length; i++) {
			tablinks[i].className = tablinks[i].className.replace(" active", "");
		  }
		  document.getElementById(cityName).style.display = "block";
		  evt.currentTarget.className += " active";
		}
		</script>



</body>

</html>
{% endblock content %}